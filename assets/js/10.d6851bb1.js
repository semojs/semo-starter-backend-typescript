(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{356:function(s,t,a){"use strict";a.r(t);var r=a(43),n=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"配置管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置管理"}},[s._v("#")]),s._v(" 配置管理")]),s._v(" "),a("h2",{attrs:{id:"配置-semo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-semo"}},[s._v("#")]),s._v(" 配置 Semo")]),s._v(" "),a("p",[s._v("可以看到在项目初始化完成以后，根目录有一个 "),a("code",[s._v("Semo")]),s._v(" 的配置文件：.semorc.json，也支持 .semorc.yml")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"--disable-global-plugin"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"--disable-home-plugin"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hook"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"typescript"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commandDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/bin/semo/commands"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commandMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/bin/semo/commands"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cronDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/bin/semo/crons"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cronMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/bin/semo/crons"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pluginDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/bin/semo/plugins"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pluginMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/bin/semo/plugins"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"extendDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/bin/semo/extends"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"extendMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/bin/semo/extends"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scriptDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/bin/semo/scripts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scriptMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/bin/semo/scripts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hookDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/bin/semo/hooks"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hookMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/bin/semo/hooks"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"migrationDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/migration"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"migrationMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/migration"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"modelDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/model"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"modelMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/model"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"controllerDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/controller"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"controllerMakeDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/controller"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),a("p",[s._v("这个配置文件是用来和 Semo 进行交互的，你可以根据 Semo 本身或者其插件的需求对其进行配置，一般来说默认的配置就够项目使用了，如果你理解了 Semo 的扩展思路和方法，你可以对这个配置的进行扩展来增强项目或者 Semo 的功能。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 各项参数的作用都很好理解：\n`commandDir`: 自定义的命令行工具在这个目录；使用 `semo generate command` 根据模板自动生成命令基础代码\n`cronDir`: 计划任务脚本在这个目录；使用 `semo generate cron` 生成样板文件\n`pluginDir`: 如果你打算渐进式的开发一个跨项目使用的 Semo 插件，需要在这个目录定义；使用 `semo generate plugin` 生成样板文件\n`extendDir`: 如果你要扩展其他插件提供的 HOOK 增强其功能，需要在这个目录进行定义；使用 `semo generate command --extend` 生成样板文件\n`scriptDir`: 如果有需要写业务脚本，在这个目录；使用 `semo generate script` 生成样板文件\n`migrationDir：` 如果需要写数据库的 migration 文件，需要在这个目录定义；使用 `semo generate migration` 生成样板文件\n`modelDir`: 如果需要写模型文件，需要在这个目录定义；使用 `semo generate model` 生成样板文件\n`controllerDir`: 如果需要写模型文件，需要在这个目录定义；使用 `semo generate controller` 生成样板文件\n\n# 覆写公共选项，影响 Semo 的运行，通常可以提升运行性能\n`--disable-global-plugin`: 禁止扫描全局插件目录\n`--disable-home-plugin`: 禁止扫描当前用户家目录插件目录\n`--typescript`: 声明这是一个基于 Typescript 的项目，所有自动生成的代码生成的都是 ts 代码\n`--hook`: 这个是覆写 repl 命令的选项，使其默认调用插件钩子，为 REPL 注入相关业务逻辑\n")])])]),a("p",[s._v("其他：")]),s._v(" "),a("ol",[a("li",[s._v("那些包含 Make 的目录是指向 ts 源码，而不带 Make 的放的是编译后的代码")]),s._v(" "),a("li",[s._v("配置文件同时支持两种风格的配置方式，同时使用时命令行选项这种风格的优先级更高，但完全没有必要这样做")])]),s._v(" "),a("h2",{attrs:{id:"应用本地配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用本地配置"}},[s._v("#")]),s._v(" 应用本地配置")]),s._v(" "),a("p",[s._v("也就是认为可以放进代码库的配置信息。应用配置这里我们用了 "),a("code",[s._v("config")]),s._v(" 这个 npm 包来管理，项目的 config 目录里很好理解，我们在 default.js 里定义跨环境共享的配置，"),a("code",[s._v("development.js")]),s._v("，"),a("code",[s._v("test.js")]),s._v(" 和 "),a("code",[s._v("production.js")]),s._v(" 里配置的是各环境的个性化配置,这样就实现了配置的复用。")]),s._v(" "),a("h2",{attrs:{id:"配置缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置缓存"}},[s._v("#")]),s._v(" 配置缓存")]),s._v(" "),a("p",[s._v("可以看到我们的配置不止一层，那么我们的配置最终到底是个什么样子，有时需要直观的看到，我们保存了一份备份到 "),a("code",[s._v("config/my.json")]),s._v(" 里，这个文件更多的是用来查看最终配置的。")])])}),[],!1,null,null,null);t.default=n.exports}}]);